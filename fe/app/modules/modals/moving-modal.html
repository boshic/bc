<div ng-hide='modalConfig.hidden' class='trans-layer'></div>
<div class='modal-container' ng-class='{modalactive: !modalConfig.hidden}' ng-transclude>
    <span class="glyphicon glyphicon-remove item-blank close-selling-modal" ng-click="closeModal()"></span>
    <div class="items-table table-responsive"
         ng-keyup="handleKeyup($event)">
        <div style="height: 65px; background: lightgray; padding-top: 3px;">
            <div class="container-sell-buyer-comment-on-selling-pane">
                <div class="sell-button-on-selling-pane">
                    <button class="glyphicon glyphicon-send sell-icon" title="Переместить"
                            ng-click="moveThis()"
                            ng-show="canMove">
                    </button>
                </div>
                <div class="moving-modal-header stock-picker-on-moving-modal">
                    <stock-picker allow-all="allowAllStocks" stock="stock"></stock-picker>
                </div>
                <div class="moving-modal-header comment-input-on-moving-modal">
                    <comment-input ng-model="comment"></comment-input>
                </div>
                <div class="total-sum">
                    <span style="margin-right: 10%;">{{(totals.quantity.toFixed(2)) + " ед."}}</span>
                    <span style="color: yellow;">{{(totals.sum).toFixed(2) + " руб."}}</span>
                </div>
            </div>
        </div>
        <table class="table table-bordered selling-modal-table">
            <tr class="pane-thead">
                <td style="width: 60px;">Номер</td>
                <td>Наименование</td>
                <td style="width: 100px;" class="unprintable">Доступно, шт.</td>
                <td style="width: 115px;">К продаже, шт.</td>
                <td style="width: 100px;">Цена, руб., коп.</td>
            </tr>
            <tbody>
            <tr class="hoverable" ng-repeat="x in movings track by $index">
                <td class="price-data" title="Номер">{{ $index + 1 }}</td>
                <td title="">{{ x.coming.item.name + "(" + x.coming.item.ean + ")"}}</td>
                <td class="current-quantity unprintable" title="Текущее количество">{{ x.coming.currentQuantity }}</td>
                <td class="hoverable for-sale" title="К продаже">
                    <input type="number" class="form-control selling-quantity"
                           id="change-quantity-on-moving-modal"
                           ng-model="x.quantity"
                           ng-change="checkMoving()"/>
                </td>
                <td class="hoverable" title="Цена продажи">
                    <input type="number" class="form-control selling-quantity" min="0"
                           ng-model="x.price"
                           ng-change="checkMoving()"
                           ng-class="{'warning-input': x.price==0||''}"/>
                </td>
            </tr>
            </tbody>
        </table>
    </div>
</div>